<style>
  .container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }

  .column {
    flex: 1;
    min-width: 300px;
    display: flex;
    flex-direction: column;
  }

  .field-group {
    margin-bottom: 15px;
  }

  .field-label {
    font-weight: bold;
    margin-bottom: 5px;
    color: #333;
  }

  .field-value {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #f9f9f9;
    word-wrap: break-word;
  }

  .missing-field {
    color: #b71c1c; /* Rosso meno intenso (rosso scuro) */
    font-style: italic;
    background-color: #fce4ec; /* Sfondo rosa molto chiaro */
    border-color: #e57373; /* Bordo rosso-rosato */
  }

  h2, h3 {
    width: 100%;
    text-align: left;
    margin-top: 30px;
    margin-bottom: 15px;
  }
</style>

<div>
  <h2>Dettagli Utente e Anamnesi</h2>

  <div class="container">
    <div class="column">
      <h3>Dati Anagrafici</h3>
      <div class="field-group">
        <div class="field-label">Nome:</div>
        <div class="field-value{{#unless firstName}} missing-field{{/unless}}">
          {{#if firstName}}
            {{firstName}}
          {{else}}
            Nome non presente
          {{/if}}
        </div>
      </div>

      {{#if middleName}}
      <div class="field-group">
        <div class="field-label">Secondo Nome:</div>
        <div class="field-value">
          {{middleName}}
        </div>
      </div>
      {{/if}}

      <div class="field-group">
        <div class="field-label">Cognome:</div>
        <div class="field-value{{#unless lastName}} missing-field{{/unless}}">
          {{#if lastName}}
            {{lastName}}
          {{else}}
            Cognome non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Email:</div>
        <div class="field-value{{#unless email}} missing-field{{/unless}}">
          {{#if email}}
            {{email}}
          {{else}}
            Email non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Numero di Telefono:</div>
        <div class="field-value{{#unless phoneNumber}} missing-field{{/unless}}">
          {{#if phoneNumber}}
            {{phoneNumber}}
          {{else}}
            Numero di telefono non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Data di Nascita:</div>
        <div class="field-value{{#unless birthDate}} missing-field{{/unless}}">
          {{#if birthDate}}
            {{birthDate}}
          {{else}}
            Data di nascita non presente
          {{/if}}
        </div>
      </div>

      <h3>Dati Anamnestici</h3>
      <div class="field-group">
        <div class="field-label">Sesso:</div>
        <div class="field-value{{#unless sex}} missing-field{{/unless}}">
          {{#if sex}}
            {{sex}}
          {{else}}
            Sesso non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Altezza (cm):</div>
        <div class="field-value{{#unless height}} missing-field{{/unless}}">
          {{#if height}}
            {{height}}
          {{else}}
            Altezza non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Peso (kg):</div>
        <div class="field-value{{#unless weight}} missing-field{{/unless}}">
          {{#if weight}}
            {{weight}}
          {{else}}
            Peso non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Fumatore:</div>
        <div class="field-value{{#unless smoker}} missing-field{{/unless}}">
          {{#if smoker}}
            Sì
          {{else}}
            Informazione fumatore non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Unità di Alcol:</div>
        <div class="field-value{{#unless alcoholUnits}} missing-field{{/unless}}">
          {{#if alcoholUnits}}
            {{alcoholUnits}}
          {{else}}
            Unità di alcol non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Livello di Attività:</div>
        <div class="field-value{{#unless activityLevel}} missing-field{{/unless}}">
          {{#if activityLevel}}
            {{activityLevel}}
          {{else}}
            Livello di attività non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Livello di Mobilità:</div>
        <div class="field-value{{#unless mobilityLevel}} missing-field{{/unless}}">
          {{#if mobilityLevel}}
            {{mobilityLevel}}
          {{else}}
            Livello di mobilità non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Frequenza Cardiaca a Riposo:</div>
        <div class="field-value{{#unless restingHeartRate}} missing-field{{/unless}}">
          {{#if restingHeartRate}}
            {{restingHeartRate}} bpm
          {{else}}
            Frequenza cardiaca a riposo non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Pressione Sanguigna:</div>
        <div class="field-value{{#unless bloodPressure}} missing-field{{/unless}}">
          {{#if bloodPressure}}
            {{bloodPressure}}
          {{else}}
            Pressione sanguigna non presente
          {{/if}}
        </div>
      </div>
    </div>

    <div class="column">
      <h3>Dati Anamnestici (continua)</h3>
      <div class="field-group">
        <div class="field-label">Professione:</div>
        <div class="field-value{{#unless profession}} missing-field{{/unless}}">
          {{#if profession}}
            {{profession}}
          {{else}}
            Professione non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Sport:</div>
        <div class="field-value{{#unless sport}} missing-field{{/unless}}">
          {{#if sport}}
            {{sport}}
          {{else}}
            Sport non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Frequenza Sportiva:</div>
        <div class="field-value{{#unless sportFrequency}} missing-field{{/unless}}">
          {{#if sportFrequency}}
            {{sportFrequency}} volte a settimana
          {{else}}
            Frequenza sportiva non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Farmaci:</div>
        <div class="field-value{{#unless medications}} missing-field{{/unless}}">
          {{#if medications}}
            {{medications}}
          {{else}}
            Farmaci non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Allergie:</div>
        <div class="field-value{{#unless allergies}} missing-field{{/unless}}">
          {{#if allergies}}
            {{allergies}}
          {{else}}
            Allergie non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Altre Patologie:</div>
        <div class="field-value{{#unless otherPathologies}} missing-field{{/unless}}">
          {{#if otherPathologies}}
            {{otherPathologies}}
          {{else}}
            Altre patologie non presenti
          {{/if}}
        </div>
      </div>

      <h3>Dati sul Dolore</h3>
      <div class="field-group">
        <div class="field-label">Zona del Dolore:</div>
        <div class="field-value{{#unless painZone}} missing-field{{/unless}}">
          {{#if painZone}}
            {{painZone}}
          {{else}}
            Zona del dolore non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Intensità del Dolore:</div>
        <div class="field-value{{#unless painIntensity}} missing-field{{/unless}}">
          {{#if painIntensity}}
            {{painIntensity}} (scala 0-10)
          {{else}}
            Intensità del dolore non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Frequenza del Dolore:</div>
        <div class="field-value{{#unless painFrequency}} missing-field{{/unless}}">
          {{#if painFrequency}}
            {{painFrequency}}
          {{else}}
            Frequenza del dolore non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Caratteristiche del Dolore:</div>
        <div class="field-value{{#unless painCharacteristics}} missing-field{{/unless}}">
          {{#if painCharacteristics}}
            {{painCharacteristics}}
          {{else}}
            Caratteristiche del dolore non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Modificatori del Dolore:</div>
        <div class="field-value{{#unless painModifiers}} missing-field{{/unless}}">
          {{#if painModifiers}}
            {{painModifiers}}
          {{else}}
            Modificatori del dolore non presenti
          {{/if}}
        </div>
      </div>

      <h3>Altri Dati</h3>
      <div class="field-group">
        <div class="field-label">Ore di Sonno:</div>
        <div class="field-value{{#unless sleepHours}} missing-field{{/unless}}">
          {{#if sleepHours}}
            {{sleepHours}} ore
          {{else}}
            Ore di sonno non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Stress Percepito:</div>
        <div class="field-value{{#unless perceivedStress}} missing-field{{/unless}}">
          {{#if perceivedStress}}
            {{perceivedStress}} (scala 0-10)
          {{else}}
            Stress percepito non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Ultimo Check-up Medico:</div>
        <div class="field-value{{#unless lastMedicalCheckup}} missing-field{{/unless}}">
          {{#if lastMedicalCheckup}}
            {{lastMedicalCheckup}}
          {{else}}
            Ultimo check-up medico non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Obiettivi Personali:</div>
        <div class="field-value{{#unless personalGoals}} missing-field{{/unless}}">
          {{#if personalGoals}}
            {{personalGoals}}
          {{else}}
            Obiettivi personali non presenti
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Note:</div>
        <div class="field-value{{#unless notes}} missing-field{{/unless}}">
          {{#if notes}}
            {{notes}}
          {{else}}
            Note non presenti
          {{/if}}
        </div>
      </div>

      <h3>Dati di Sistema</h3>
      <div class="field-group">
        <div class="field-label">ID Utente:</div>
        <div class="field-value{{#unless userId}} missing-field{{/unless}}">
          {{#if userId}}
            {{userId}}
          {{else}}
            ID Utente non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Ultimo Accesso:</div>
        <div class="field-value{{#unless lastLogin}} missing-field{{/unless}}">
          {{#if lastLogin}}
            {{lastLogin}}
          {{else}}
            Ultimo accesso non presente
          {{/if}}
        </div>
      </div>

      <div class="field-group">
        <div class="field-label">Creato il:</div>
        <div class="field-value{{#unless createdAt}} missing-field{{/unless}}">
          {{#if createdAt}}
            {{createdAt}}
          {{else}}
            Data di creazione non presente
          {{/if}}
        </div>
      </div>
    </div>
  </div>
</div>