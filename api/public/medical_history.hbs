<style>
  /* Stili Generali */
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    color: #333;
  }

  /* Stili per i blocchi di sezione (Dati Anagrafici, Anamnestici, ecc.) */
  .section-block {
    margin-bottom: 25px; /* Spazio tra le sezioni */
    padding-bottom: 15px; /* Padding per assicurare che il contenuto non si incolli al bordo inferiore */
    border-bottom: 1px solid #eee; /* Linea separatrice per chiarezza */
    /* Proprietà cruciali per il PDF */
    page-break-inside: avoid; /* Evita che il contenuto della sezione venga spezzato su due pagine */
    page-break-after: auto; /* Permette un'interruzione di pagina dopo la sezione, se necessario */
  }

  /* Layout a 2 colonne all'interno di ogni sezione */
  .columns-container {
    display: flex;
    flex-wrap: wrap; /* Permette alle colonne di andare a capo su schermi piccoli */
    gap: 20px; /* Spazio tra le colonne */
    justify-content: space-between; /* Distribuisce lo spazio */
  }

  .column-item {
    flex: 1 1 45%; /* Flex-grow, flex-shrink, flex-basis: ogni elemento occupa circa la metà dello spazio */
    min-width: 280px; /* Larghezza minima per evitare colonne troppo strette */
  }

  .field-group {
    margin-bottom: 12px; /* Spazio tra un campo e l'altro */
  }

  .field-label {
    font-weight: bold;
    margin-bottom: 3px;
    color: #444;
    font-size: 0.95em;
  }

  .field-value {
    padding: 6px 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #fcfcfc;
    word-wrap: break-word; /* Permette al testo di andare a capo */
    font-size: 0.9em;
  }

  /* Stili per i campi mancanti (meno intenso) */
  .missing-field {
    color: #b71c1c; /* Rosso scuro */
    font-style: italic;
    background-color: #fce4ec; /* Rosa molto chiaro */
    border-color: #e57373; /* Rosso-rosato per il bordo */
  }

  /* Stili per i titoli */
  h2 {
    font-size: 1.8em;
    margin-bottom: 20px;
    color: #2a6a9e; /* Blu più scuro */
  }

  h3 {
    font-size: 1.4em;
    margin-top: 25px;
    margin-bottom: 15px;
    color: #4a90d9; /* Blu */
    width: 100%; /* I titoli si estendono su tutta la larghezza */
  }
</style>

<div>
  <h1>Report Dettagli Utente e Anamnesi</h1>

  <div class="section-block">
    <h3>Dati Anagrafici</h3>
    <div class="columns-container">
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Nome:</div>
          <div class="field-value{{#unless firstName}} missing-field{{/unless}}">
            {{#if firstName}}
              {{firstName}}
            {{else}}
              Nome non presente
            {{/if}}
          </div>
        </div>
      </div>
        {{#if middleName}}
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Secondo Nome:</div>
          <div class="field-value">
            {{middleName}}
          </div>
        </div>
      </div>
        {{/if}}
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Cognome:</div>
          <div class="field-value{{#unless lastName}} missing-field{{/unless}}">
            {{#if lastName}}
              {{lastName}}
            {{else}}
              Cognome non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Email:</div>
          <div class="field-value{{#unless email}} missing-field{{/unless}}">
            {{#if email}}
              {{email}}
            {{else}}
              Email non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Numero di Telefono:</div>
          <div class="field-value{{#unless phoneNumber}} missing-field{{/unless}}">
            {{#if phoneNumber}}
              {{phoneNumber}}
            {{else}}
              Numero di telefono non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Data di Nascita:</div>
          <div class="field-value{{#unless birthDate}} missing-field{{/unless}}">
            {{#if birthDate}}
              {{birthDate}}
            {{else}}
              Data di nascita non presente
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section-block">
    <h3>Dati Anamnestici</h3>
    <div class="columns-container">
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Sesso:</div>
          <div class="field-value{{#unless sex}} missing-field{{/unless}}">
            {{#if sex}}
              {{sex}}
            {{else}}
              Sesso non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Altezza (cm):</div>
          <div class="field-value{{#unless height}} missing-field{{/unless}}">
            {{#if height}}
              {{height}}
            {{else}}
              Altezza non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Peso (kg):</div>
          <div class="field-value{{#unless weight}} missing-field{{/unless}}">
            {{#if weight}}
              {{weight}}
            {{else}}
              Peso non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Fumatore:</div>
          <div class="field-value">
            {{#if smoker}}
              Sì
            {{else}}
              No
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Unità di Alcol:</div>
          <div class="field-value{{#unless alcoholUnits}} missing-field{{/unless}}">
            {{#if alcoholUnits}}
              {{alcoholUnits}}
            {{else}}
              Unità di alcol non presenti
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Livello di difficoltà a svolgere attività:</div>
          <div class="field-value{{#unless activityLevel}} missing-field{{/unless}}">
            {{#if activityLevel}}
              {{activityLevel}}
            {{else}}
              Livello di difficoltà a svolgere attività non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Livello di Mobilità:</div>
          <div class="field-value{{#unless mobilityLevel}} missing-field{{/unless}}">
            {{#if mobilityLevel}}
              {{mobilityLevel}}
            {{else}}
              Livello di mobilità non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Frequenza Cardiaca a Riposo:</div>
          <div class="field-value{{#unless restingHeartRate}} missing-field{{/unless}}">
            {{#if restingHeartRate}}
              {{restingHeartRate}} bpm
            {{else}}
              Frequenza cardiaca a riposo non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Pressione Sanguigna:</div>
          <div class="field-value{{#unless bloodPressure}} missing-field{{/unless}}">
            {{#if bloodPressure}}
              {{bloodPressure}}
            {{else}}
              Pressione sanguigna non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Professione:</div>
          <div class="field-value{{#unless profession}} missing-field{{/unless}}">
            {{#if profession}}
              {{profession}}
            {{else}}
              Professione non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Sport:</div>
          <div class="field-value{{#unless sport}} missing-field{{/unless}}">
            {{#if sport}}
              {{sport}}
            {{else}}
              Sport non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Frequenza Sportiva:</div>
          <div class="field-value{{#unless sportFrequency}} missing-field{{/unless}}">
            {{#if sportFrequency}}
              {{sportFrequency}} volte a settimana
            {{else}}
              0
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Farmaci:</div>
          <div class="field-value{{#unless medications}} missing-field{{/unless}}">
            {{#if medications}}
              {{medications}}
            {{else}}
              Farmaci non presenti
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Allergie:</div>
          <div class="field-value{{#unless allergies}} missing-field{{/unless}}">
            {{#if allergies}}
              {{allergies}}
            {{else}}
              Allergie non presenti
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Altre Patologie:</div>
          <div class="field-value{{#unless otherPathologies}} missing-field{{/unless}}">
            {{#if otherPathologies}}
              {{otherPathologies}}
            {{else}}
              Altre patologie non presenti
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section-block">
    <h3>Altri Dati</h3>
    <div class="columns-container">
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Ore di Sonno:</div>
          <div class="field-value{{#unless sleepHours}} missing-field{{/unless}}">
            {{#if sleepHours}}
              {{sleepHours}} ore
            {{else}}
              Ore di sonno non presenti
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Ultimo Check-up Medico:</div>
          <div class="field-value{{#unless lastMedicalCheckup}} missing-field{{/unless}}">
            {{#if lastMedicalCheckup}}
              {{lastMedicalCheckup}}
            {{else}}
              Ultimo check-up medico non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Obiettivi Personali:</div>
          <div class="field-value{{#unless personalGoals}} missing-field{{/unless}}">
            {{#if personalGoals}}
              {{personalGoals}}
            {{else}}
              Obiettivi personali non presenti
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Note:</div>
          <div class="field-value{{#unless notes}} missing-field{{/unless}}">
            {{#if notes}}
              {{notes}}
            {{else}}
              Note non presenti
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="section-block">
    <h3>Dati di Sistema</h3>
    <div class="columns-container">
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">ID Utente:</div>
          <div class="field-value{{#unless userId}} missing-field{{/unless}}">
            {{#if userId}}
              {{userId}}
            {{else}}
              ID Utente non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Ultimo Accesso:</div>
          <div class="field-value{{#unless lastLogin}} missing-field{{/unless}}">
            {{#if lastLogin}}
              {{lastLogin}}
            {{else}}
              Ultimo accesso non presente
            {{/if}}
          </div>
        </div>
      </div>
      <div class="column-item">
        <div class="field-group">
          <div class="field-label">Creato il:</div>
          <div class="field-value{{#unless createdAt}} missing-field{{/unless}}">
            {{#if createdAt}}
              {{createdAt}}
            {{else}}
              Data di creazione non presente
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

</div>